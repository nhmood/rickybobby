{{> partials/_head }}
<body>
  <div class="container">
    {{> partials/_header }}


    <div id="main" class="row">
      <div class="row header">
        <h1>Shake and Bake</h1>
      </div>



      <div class="row component user_info">
        <div class="five columns user userA">

          <div class="row details">
            <div class="ten columns">
              <div class="row username">{{userA.data.username}}</div>
              <div class="row location">{{userA.data.location}}</div>
            </div>
            <div class="two columns">
              <a href="/users/{{userA.data.username}}">
              <img class="profile u-full-width" src="{{userA.data.image_url}}"></img>
              </a>
            </div>
          </div><!-- details -->

          <div class="row score">
            {{userA.wins}}
            {{#userA.winner}}
              ðŸ”¥
            {{/userA.winner}}
          </div><!-- score -->
        </div><!-- userA -->

        <div class="two columns vs">VS</div>


        <div class="five columns user userB">
          <div class="row details">
            <div class="two columns">
              <a href="/users/{{userB.data.username}}">
                <img class="profile u-full-width" src="{{userB.data.image_url}}"></img>
              </a>
            </div>
            <div class="ten columns">
              <div class="row username">{{userB.data.username}}</div>
              <div class="row location">{{userB.data.location}}</div>
            </div>
          </div><!-- details -->

          <div class="row score">
            {{userB.wins}}
            {{#userB.winner}}
              ðŸ”¥
            {{/userB.winner}}
          </div><!-- score -->
        </div><!-- details -->
      </div><!-- user_info -->


      <div class="row workouts">
        <div class="row header">
          <h2>Workouts</h2>

          {{#workouts.data}}
            <div class="row comparison component">
              <div class="row ride-details">
                <div class="row ride-image">
                  <img class="u-full-width" src="{{ride.instructor.data.image_url}}"></img>
                </div><!-- ride-image -->

                <div class="row ride-name">{{ride.data.title}}</div>
                <div class="row ride-instructor">{{ride.instructor.data.name}}</div>
              </div><!-- ride-details -->



              <div class="row workout-details">
                {{#workouts}}
                  <div class="six columns">
                    <div class="row workout-output">Output: {{avg_output}}</div>
                    <div class="row workout-taken">Taken: {{data.created_at}}</div>

                    <div class="workout-metrics">
                      {{#performance.metrics}}
                      <div class="row workout-{{display_name}}">{{display_name}}: avg:{{average_value}} / max:{{max_value}} {{display units}}</div>
                      {{/performance.metrics}}
                    </div>
                  </div>
                {{/workouts}}
              </div><!-- workout-details -->


            </div><!-- comparison -->
          {{/workouts.data}}
        </div>
      </div><!-- workouts -->

    </div><!-- main -->
  </div><!-- container -->
</body>


<pre class="hide" data-type="workouts">
  {{ workouts.debug }}
</pre>
<pre class="hide" data-type="userA">
  {{ userA.debug }}
</pre>
<pre class="hide" data-type="userB">
  {{ userB.debug }}
</pre>

<script>
  let debug = document.getElementsByTagName("pre");
  let data = Array.from(debug).reduce((result, item) => {
    let type =item.dataset.type;
    result[type] = JSON.parse(item.innerHTML);
    return result;
  }, {})
</script>


{{> partials/_end }}
